(function(e){function t(t){for(var r,u,l=t[0],c=t[1],a=t[2],m=0,f=[];m<l.length;m++)u=l[m],Object.prototype.hasOwnProperty.call(i,u)&&i[u]&&f.push(i[u][0]),i[u]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);o&&o(t);while(f.length)f.shift()();return s.push.apply(s,a||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==i[c]&&(r=!1)}r&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},i={app:0},s=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var o=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"11d4":function(e,t,n){"use strict";n("6826")},"173c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.currentMenu?n("div",{staticClass:"menu-builder"},[n("div",{staticClass:"title"},[n("span",[e._v(e._s(e.currentMenu.title))])]),n("div",{staticClass:"content"},[n("div",{staticClass:"elements",style:"height:"+40*(e.currentMenu.count_elements||5)+"px"},e._l(e.currentMenu.elements,(function(t,r){return n("IElement",{key:r,ref:"element-"+r,refInFor:!0,attrs:{element:t,active:r===e.currentMenuElement},on:{eswitch:function(n){return e.elementSwitch(t,n)}},nativeOn:{click:function(t){return e.selectElement(r)},dblclick:function(n){return e.selectMenu(t)}}})})),1)])]):e._e(),e.currentElement&&e.currentElement.info_elements?n("IInfoElements",{attrs:{info_elements:e.currentElement.info_elements,top:e.offsetInfoElements.top,left:e.offsetInfoElements.left}}):e._e()],1)},s=[],u=(n("caad"),n("b0c0"),n("ac1f"),n("5319"),n("b85c")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["i-element",{active:e.active,spaced:e.element.price||e.element.desc||e.element.input}]},[n("div",{class:["element"]},[e.element.title?n("span",{staticClass:"title"},[e._v(e._s(e.element.title))]):e._e(),e.element.price?n("span",{staticClass:"price"},[e._v("$ "+e._s(e._f("dottingNumber")(e.element.price)))]):e._e(),e.element.desc?n("span",{staticClass:"title-2"},[e._v(e._s(e.element.desc))]):e._e()]),e.element.input?n("div",{staticClass:"input-value"},["checkbox"===e.element.input.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.element.input.value,expression:"element.input.value"}],ref:"element-input-"+e.element.name,attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.element.input.value)?e._i(e.element.input.value,null)>-1:e.element.input.value},on:{change:function(t){var n=e.element.input.value,r=t.target,i=!!r.checked;if(Array.isArray(n)){var s=null,u=e._i(n,s);r.checked?u<0&&e.$set(e.element.input,"value",n.concat([s])):u>-1&&e.$set(e.element.input,"value",n.slice(0,u).concat(n.slice(u+1)))}else e.$set(e.element.input,"value",i)}}}):"radio"===e.element.input.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.element.input.value,expression:"element.input.value"}],ref:"element-input-"+e.element.name,attrs:{type:"radio"},domProps:{checked:e._q(e.element.input.value,null)},on:{change:function(t){return e.$set(e.element.input,"value",null)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.element.input.value,expression:"element.input.value"}],ref:"element-input-"+e.element.name,attrs:{type:e.element.input.type},domProps:{value:e.element.input.value},on:{input:function(t){t.target.composing||e.$set(e.element.input,"value",t.target.value)}}})]):e._e(),e.element.switcher?n("div",{staticClass:"switcher"},[n("button",{staticClass:"left",domProps:{textContent:e._s("<")},on:{click:function(t){return e.$emit("eswitch",-1)}}}),n("span",[e._v(e._s(e.element.switcher.items[e.element.switcher.current].title))]),n("button",{staticClass:"right",domProps:{textContent:e._s(">")},on:{click:function(t){return e.$emit("eswitch",1)}}})]):e._e()])},c=[],a=(n("a9e3"),n("d3b7"),n("25f0"),{name:"IElement",props:{index:Number,element:{name:String,title:String,price:{data:Number},desc:{data:String},input:Object},active:Boolean},filters:{dottingNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}}),o=a,m=(n("79bd"),n("2877")),f=Object(m["a"])(o,l,c,!1,null,"7c34ea14",null),p=f.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"i-info-elements",style:"top: "+e.top+"px; left: "+e.left+"px"},e._l(e.info_elements,(function(e,t){return n("IInfoElement",{key:t,attrs:{info_element:e}})})),1)},d=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"i-info-element"},[n("div",{staticClass:"title"},[n("span",[e._v(e._s(e.info_element.title))])]),n("div",{staticClass:"value"},[n("span",[e._v(e._s(e._f("parsePrice")(e.info_element.value)))])])])},g=[],_={name:"IInfoElement",props:{info_element:{name:String,title:String,value:String}},filters:{parsePrice:function(e){return e.indexOf("$")>=0?e.replace(/\B(?=(\d{3})+(?!\d))/g,"."):e}}},b=_,w=(n("11d4"),Object(m["a"])(b,v,g,!1,null,"1310a4f8",null)),y=w.exports,E={name:"IInfoElements",components:{IInfoElement:y},props:{info_elements:Array,top:Number,left:Number}},M=E,I=(n("6255"),Object(m["a"])(M,h,d,!1,null,"708401ed",null)),k=I.exports,x={name:"App",components:{IInfoElements:k,IElement:p},data:function(){return{gettingData:{owner:"",price:0,model:"",number:"",turbo:"",engine:"",breaking:"",box:"",susp:""},menuList:[],currentMenuIndex:0,currentMenuElement:0,currentInputFocused:null,history:[]}},mounted:function(){window.setList=this.setList,addEventListener("keydown",this.onKeyDown),"mp"in window&&(mp.events.call("MenuBuilder:ready"),mp.events.add("MenuBuilder:setList",this.setList),mp.events.add("MenuBuilder:setData",this.setData)),this.renderData()},destroyed:function(){removeEventListener("keydown",this.onKeyDown)},methods:{getData:function(e){return this.gettingData[e]},setData:function(e){try{e=JSON.parse(e),this.gettingData=e,this.renderData()}catch(t){console.error(t)}},renderData:function(){var e=[{name:"bazar_main",title:"Автобазар",elements:[{name:"bazar_test",title:"Владелец: ".concat(this.getData("owner"))},{name:"bazar_info",title:"Информация об автомобиле",info_elements:[{name:"model_info",title:"Модель:",value:this.getData("model")},{name:"number_info",title:"Номера:",value:this.getData("number")},{name:"price_info",title:"Цена:",value:"".concat(this.getData("price")," $")}]},{name:"tuning_info",title:"Информация о тюнинге",info_elements:[{name:"turbo",title:"Турбо-тюнинг:",value:this.getData("turbo")},{name:"engine",title:"Двигатель:",value:this.getData("engine")},{name:"breaking",title:"Тормоза:",value:this.getData("breaking")},{name:"box",title:"Коробка передач:",value:this.getData("box")},{name:"susp",title:"Подвеска:",value:this.getData("susp")}]},{name:"bazar_buy",title:"Приобрести автомобиль [НАЛИЧНЫЕ]",select:!0},{name:"bazar_buy_card",title:"Приобрести автомобиль [КАРТА]",select:!0},{name:"bazar_getback",title:"Забрать автомобиль с продажи",select:!0},{name:"close",title:"Закрыть меню",select:!0}],count_elements:7}];this.$set(this,"menuList",e)},setList:function(e){if("string"===typeof e){try{e=JSON.parse(e)}catch(t){return console.error(t),!1}this.$set(this,"menuList",e)}},selectElement:function(e){this.currentMenuElement=e,this.focusingInput()},forwardElement:function(e){var t=0,n=this.currentMenu.elements.length-1;e>0?this.currentMenuElement+e<=n?this.selectElement(this.currentMenuElement+e):this.selectElement(t):e<0&&(this.currentMenuElement+e>=t?this.selectElement(this.currentMenuElement+e):this.selectElement(n));var r=this.$refs["element-"+this.currentMenuElement][0].$el;r.scrollIntoViewIfNeeded(!0)},elementSwitch:function(e,t){var n=0,r=e.switcher.items.length-1;t>0?e.switcher.current+t<=r?e.switcher.current+=t:e.switcher.current=n:t<0&&(e.switcher.current+t>=n?e.switcher.current+=t:e.switcher.current=r)},getMenuByName:function(e){for(var t=0;t<this.menuList.length;t++){var n=this.menuList[t];if(n.name===e)return n}return null},selectMenu:function(e){var t=this,n=function(){t.history.length>0&&(t.currentMenuIndex=t.history.pop(),t.currentMenuElement=0)};if(e.confirm){var r=e.name.replace("_confirm",""),i=this.getMenuByName(r);if(i){var s,l=[],c=Object(u["a"])(i.elements);try{for(c.s();!(s=c.n()).done;){var a=s.value;a.switcher?l.push({type:"switcher",name:a.switcher.items[a.switcher.current].name,title:a.switcher.items[a.switcher.current].title}):a.input&&l.push({type:"input",name:a.input.name,value:a.input.value})}}catch(f){c.e(f)}finally{c.f()}l.length>0&&"mp"in window&&mp.events.call("MenuBuilder:confirm",r,JSON.stringify(l))}}if(e.select&&"mp"in window&&mp.events.call("MenuBuilder:select",JSON.stringify(e)),"close"===e.name||e.close)"mp"in window&&mp.events.call("MenuBuilder:close");else if("back"===e.name||e.back)n();else{for(var o in this.menuList){var m=this.menuList[o];if(m.name===e.name){this.history.push(this.currentMenuIndex),this.currentMenuElement=0,this.currentMenuIndex=o;break}}this.focusingInput()}},focusingInput:function(){var e=this;this.currentInputFocused&&(this.currentInputFocused.blur(),this.currentInputFocused=null),this.$nextTick((function(){var t=e.currentMenu.elements[e.currentMenuElement];if(t.input){var n=e.$refs["element-"+e.currentMenuElement][0];e.$nextTick((function(){var r=n.$refs["element-input-"+t.name];e.currentInputFocused=r,e.currentInputFocused.focus()}))}}))},onKeyDown:function(e){var t=[37,38,39,40,13,9];if(!t.includes(e.keyCode))return!1;e.preventDefault(),38===e.keyCode?this.forwardElement(-1):40===e.keyCode?this.forwardElement(1):13===e.keyCode?this.selectMenu(this.currentMenu.elements[this.currentMenuElement]):37===e.keyCode?this.currentElement&&this.currentElement.switcher&&this.elementSwitch(this.currentElement,-1):39===e.keyCode&&this.currentElement&&this.currentElement.switcher&&this.elementSwitch(this.currentElement,1)}},computed:{currentMenu:function(){return this.menuList[this.currentMenuIndex]},currentElement:function(){return!!this.currentMenu&&this.currentMenu.elements[this.currentMenuElement]},offsetInfoElements:function(){var e={top:0,left:0};if(!this.currentElement||!this.currentElement.info_elements)return e;for(var t,n=this.$children,r=0;r<n.length;r++)if(n[r].$props.element.info_elements){t=n[r];break}if(!t)return e;var i=t.$el.getBoundingClientRect();return{top:i.top,left:i.left-400-5}}}},$=x,C=(n("5c0b"),Object(m["a"])($,i,s,!1,null,null,null)),D=C.exports;r["a"].config.productionTip=!1,window.app=new r["a"]({render:function(e){return e(D)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},6255:function(e,t,n){"use strict";n("173c")},6826:function(e,t,n){},"6ed4":function(e,t,n){},"79bd":function(e,t,n){"use strict";n("6ed4")},"9c0c":function(e,t,n){}});