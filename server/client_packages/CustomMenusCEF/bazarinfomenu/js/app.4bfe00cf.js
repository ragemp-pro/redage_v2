!function(e){function t(t){for(var r,s,u=t[0],c=t[1],a=t[2],m=0,_=[];m<u.length;m++)s=u[m],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&_.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(o&&o(t);_.length;)_.shift()();return l.push.apply(l,a||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],r=!0,u=1;u<n.length;u++){var c=n[u];0!==i[c]&&(r=!1)}r&&(l.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},l=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var a=0;a<u.length;a++)t(u[a]);var o=c;l.push([0,"chunk-vendors"]),n()}({0:function(e,t,n){e.exports=n("56d7")},"11d4":function(e,t,n){"use strict";n("6826")},"173c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=(n("caad"),n("b0c0"),n("ac1f"),n("5319"),n("b85c")),l=(n("a9e3"),n("d3b7"),n("25f0"),{name:"IElement",props:{index:Number,element:{name:String,title:String,price:{data:Number},desc:{data:String},input:Object},active:Boolean},filters:{dottingNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}}),s=(n("79bd"),n("2877")),u=Object(s.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["i-element",{active:e.active,spaced:e.element.price||e.element.desc||e.element.input}]},[n("div",{class:["element"]},[e.element.title?n("span",{staticClass:"title"},[e._v(e._s(e.element.title))]):e._e(),e.element.price?n("span",{staticClass:"price"},[e._v("$ "+e._s(e._f("dottingNumber")(e.element.price)))]):e._e(),e.element.desc?n("span",{staticClass:"title-2"},[e._v(e._s(e.element.desc))]):e._e()]),e.element.input?n("div",{staticClass:"input-value"},["checkbox"===e.element.input.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.element.input.value,expression:"element.input.value"}],ref:"element-input-"+e.element.name,attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.element.input.value)?e._i(e.element.input.value,null)>-1:e.element.input.value},on:{change:function(t){var n=e.element.input.value,r=t.target,i=!!r.checked;if(Array.isArray(n)){var l=e._i(n,null);r.checked?l<0&&e.$set(e.element.input,"value",n.concat([null])):l>-1&&e.$set(e.element.input,"value",n.slice(0,l).concat(n.slice(l+1)))}else e.$set(e.element.input,"value",i)}}}):"radio"===e.element.input.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.element.input.value,expression:"element.input.value"}],ref:"element-input-"+e.element.name,attrs:{type:"radio"},domProps:{checked:e._q(e.element.input.value,null)},on:{change:function(t){return e.$set(e.element.input,"value",null)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.element.input.value,expression:"element.input.value"}],ref:"element-input-"+e.element.name,attrs:{type:e.element.input.type},domProps:{value:e.element.input.value},on:{input:function(t){t.target.composing||e.$set(e.element.input,"value",t.target.value)}}})]):e._e(),e.element.switcher?n("div",{staticClass:"switcher"},[n("button",{staticClass:"left",domProps:{textContent:e._s("<")},on:{click:function(t){return e.$emit("eswitch",-1)}}}),n("span",[e._v(e._s(e.element.switcher.items[e.element.switcher.current].title))]),n("button",{staticClass:"right",domProps:{textContent:e._s(">")},on:{click:function(t){return e.$emit("eswitch",1)}}})]):e._e()])},[],!1,null,"7c34ea14",null).exports,c={name:"IInfoElement",props:{info_element:{name:String,title:String,value:String}},filters:{parsePrice:function(e){return e.indexOf("$")>=0?e.replace(/\B(?=(\d{3})+(?!\d))/g,"."):e}}},a={name:"IInfoElements",components:{IInfoElement:(n("11d4"),Object(s.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"i-info-element"},[n("div",{staticClass:"title"},[n("span",[e._v(e._s(e.info_element.title))])]),n("div",{staticClass:"value"},[n("span",[e._v(e._s(e._f("parsePrice")(e.info_element.value)))])])])},[],!1,null,"1310a4f8",null)).exports},props:{info_elements:Array,top:Number,left:Number}},o={name:"App",components:{IInfoElements:(n("6255"),Object(s.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"i-info-elements",style:"top: "+e.top+"px; left: "+e.left+"px"},e._l(e.info_elements,function(e,t){return n("IInfoElement",{key:t,attrs:{info_element:e}})}),1)},[],!1,null,"708401ed",null)).exports,IElement:u},data:function(){return{gettingData:{},menuList:[],currentMenuIndex:0,currentMenuElement:0,currentInputFocused:null,history:[]}},mounted:function(){window.setList=this.setList,addEventListener("keydown",this.onKeyDown),"mp"in window&&(mp.events.call("MenuBuilder:ready"),mp.events.add("MenuBuilder:setList",this.setList),mp.events.add("MenuBuilder:setData",this.setData)),this.renderData()},destroyed:function(){removeEventListener("keydown",this.onKeyDown)},methods:{getData:function(e){return this.gettingData[e]},setData:function(e){try{e=JSON.parse(e),this.gettingData=e,this.renderData()}catch(e){console.error(e)}},renderData:function(){this.$set(this,"menuList",[{name:"bazar_main",title:"Автобазар (FAQ)",elements:[{name:"bazarinfo_buy",title:"Как купить машину?"},{name:"bazarinfo_sell",title:"Как продать машину?"},{name:"close",title:"Я всё понял! (Выйти)"}],count_elements:5},{name:"bazarinfo_buy",title:"Как купить машину",elements:[{name:"bazarinfo_buy1",title:"Чтобы приобрести автомобиль вам нужно:"},{name:"bazarinfo_sell6",title:"_______________________________"},{name:"bazarinfo_buy2",title:"1. Подойти к автомобилю на парковке и нажать G"},{name:"bazarinfo_buy3",title:"2. Ознакомится с характеристиками авто"},{name:"bazarinfo_buy4",title:"3. Выбрать способ оплаты и купить"},{name:"bazarinfo_buy5",title:"_______________________________"},{name:"back",title:"Я всё понял! (Вернуться назад)"}],count_elements:7},{name:"bazarinfo_sell",title:"Как продать машину",elements:[{name:"bazarinfo_sell1",title:"Чтобы продать автомобиль вам нужно:"},{name:"bazarinfo_sell6",title:"_______________________________"},{name:"bazarinfo_sell2",title:"1. Сесть в свой личный автомобиль"},{name:"bazarinfo_sell3",title:"2. Подъехать к одному из двух маркеров, которые находятся слева от парковки"},{name:"bazarinfo_sell4",title:"3. Заехать в маркер и нажать Е"},{name:"bazarinfo_sell5",title:"4. После того, как вы укажете цену, ваш автомобиль отправится на продажу"},{name:"bazarinfo_sell6",title:"_______________________________"},{name:"back",title:"Я всё понял! (Вернуться назад)"}],count_elements:8}])},setList:function(e){if("string"==typeof e){try{e=JSON.parse(e)}catch(e){return console.error(e),!1}this.$set(this,"menuList",e)}},selectElement:function(e){this.currentMenuElement=e,this.focusingInput()},forwardElement:function(e){var t=this.currentMenu.elements.length-1;e>0?this.currentMenuElement+e<=t?this.selectElement(this.currentMenuElement+e):this.selectElement(0):e<0&&(this.currentMenuElement+e>=0?this.selectElement(this.currentMenuElement+e):this.selectElement(t)),this.$refs["element-"+this.currentMenuElement][0].$el.scrollIntoViewIfNeeded(!0)},elementSwitch:function(e,t){var n=e.switcher.items.length-1;t>0?e.switcher.current+t<=n?e.switcher.current+=t:e.switcher.current=0:t<0&&(e.switcher.current+t>=0?e.switcher.current+=t:e.switcher.current=n)},getMenuByName:function(e){for(var t=0;t<this.menuList.length;t++){var n=this.menuList[t];if(n.name===e)return n}return null},selectMenu:function(e){var t=this;if(e.confirm){var n=e.name.replace("_confirm",""),r=this.getMenuByName(n);if(r){var l,s=[],u=Object(i.a)(r.elements);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.switcher?s.push({type:"switcher",name:c.switcher.items[c.switcher.current].name,title:c.switcher.items[c.switcher.current].title}):c.input&&s.push({type:"input",name:c.input.name,value:c.input.value})}}catch(e){u.e(e)}finally{u.f()}s.length>0&&"mp"in window&&mp.events.call("MenuBuilder:confirm",n,JSON.stringify(s))}}if(e.select&&"mp"in window&&mp.events.call("MenuBuilder:select",JSON.stringify(e)),"close"===e.name||e.close)"mp"in window&&mp.events.call("MenuBuilder:close");else if("back"===e.name||e.back)t.history.length>0&&(t.currentMenuIndex=t.history.pop(),t.currentMenuElement=0);else{for(var a in this.menuList){if(this.menuList[a].name===e.name){this.history.push(this.currentMenuIndex),this.currentMenuElement=0,this.currentMenuIndex=a;break}}this.focusingInput()}},focusingInput:function(){var e=this;this.currentInputFocused&&(this.currentInputFocused.blur(),this.currentInputFocused=null),this.$nextTick(function(){var t=e.currentMenu.elements[e.currentMenuElement];if(t.input){var n=e.$refs["element-"+e.currentMenuElement][0];e.$nextTick(function(){var r=n.$refs["element-input-"+t.name];e.currentInputFocused=r,e.currentInputFocused.focus()})}})},onKeyDown:function(e){if(![37,38,39,40,13,9].includes(e.keyCode))return!1;e.preventDefault(),38===e.keyCode?this.forwardElement(-1):40===e.keyCode?this.forwardElement(1):13===e.keyCode?this.selectMenu(this.currentMenu.elements[this.currentMenuElement]):37===e.keyCode?this.currentElement&&this.currentElement.switcher&&this.elementSwitch(this.currentElement,-1):39===e.keyCode&&this.currentElement&&this.currentElement.switcher&&this.elementSwitch(this.currentElement,1)}},computed:{currentMenu:function(){return this.menuList[this.currentMenuIndex]},currentElement:function(){return!!this.currentMenu&&this.currentMenu.elements[this.currentMenuElement]},offsetInfoElements:function(){var e={top:0,left:0};if(!this.currentElement||!this.currentElement.info_elements)return e;for(var t,n=this.$children,r=0;r<n.length;r++)if(n[r].$props.element.info_elements){t=n[r];break}if(!t)return e;var i=t.$el.getBoundingClientRect();return{top:i.top,left:i.left-400-5}}}},m=(n("5c0b"),Object(s.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.currentMenu?n("div",{staticClass:"menu-builder"},[n("div",{staticClass:"title"},[n("span",[e._v(e._s(e.currentMenu.title))])]),n("div",{staticClass:"content"},[n("div",{staticClass:"elements",style:"height:"+40*(e.currentMenu.count_elements||5)+"px"},e._l(e.currentMenu.elements,function(t,r){return n("IElement",{key:r,ref:"element-"+r,refInFor:!0,attrs:{element:t,active:r===e.currentMenuElement},on:{eswitch:function(n){return e.elementSwitch(t,n)}},nativeOn:{click:function(t){return e.selectElement(r)},dblclick:function(n){return e.selectMenu(t)}}})}),1)])]):e._e(),e.currentElement&&e.currentElement.info_elements?n("IInfoElements",{attrs:{info_elements:e.currentElement.info_elements,top:e.offsetInfoElements.top,left:e.offsetInfoElements.left}}):e._e()],1)},[],!1,null,null,null)).exports;r.a.config.productionTip=!1,window.app=new r.a({render:function(e){return e(m)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},6255:function(e,t,n){"use strict";n("173c")},6826:function(e,t,n){},"6ed4":function(e,t,n){},"79bd":function(e,t,n){"use strict";n("6ed4")},"9c0c":function(e,t,n){}});